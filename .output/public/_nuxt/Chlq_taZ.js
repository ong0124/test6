import N from"./BEA7cDeX.js";import{I as j,$ as R,a0 as V,j as W,a1 as m,M as D,r as P,t as w,v as y,x as A,O as I,B as M,z as F,y as _,N as z,P as G,Q as q,a2 as Q,T as X}from"./C0L9LiXI.js";function H(e){return R()?(V(e),!0):!1}const B=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const J=Object.prototype.toString,K=e=>J.call(e)==="[object Object]",b=()=>{},U=Y();function Y(){var e,i;return B&&((e=window==null?void 0:window.navigator)==null?void 0:e.userAgent)&&(/iP(?:ad|hone|od)/.test(window.navigator.userAgent)||((i=window==null?void 0:window.navigator)==null?void 0:i.maxTouchPoints)>2&&/iPad|Macintosh/.test(window==null?void 0:window.navigator.userAgent))}function T(e){return Array.isArray(e)?e:[e]}function Z(e,i,r){return j(e,i,{...r,immediate:!0})}const L=B?window:void 0;function x(e){var i;const r=m(e);return(i=r==null?void 0:r.$el)!=null?i:r}function k(...e){const i=[],r=()=>{i.forEach(l=>l()),i.length=0},c=(l,n,s,d)=>(l.addEventListener(n,s,d),()=>l.removeEventListener(n,s,d)),a=W(()=>{const l=T(m(e[0])).filter(n=>n!=null);return l.every(n=>typeof n!="string")?l:void 0}),p=Z(()=>{var l,n;return[(n=(l=a.value)==null?void 0:l.map(s=>x(s)))!=null?n:[L].filter(s=>s!=null),T(m(a.value?e[1]:e[0])),T(D(a.value?e[2]:e[1])),m(a.value?e[3]:e[2])]},([l,n,s,d])=>{if(r(),!(l!=null&&l.length)||!(n!=null&&n.length)||!(s!=null&&s.length))return;const f=K(d)?{...d}:d;i.push(...l.flatMap(h=>n.flatMap(v=>s.map(S=>c(h,v,S,f)))))},{flush:"post"}),g=()=>{p(),r()};return H(r),g}let $=!1;function ee(e,i,r={}){const{window:c=L,ignore:a=[],capture:p=!0,detectIframe:g=!1,controls:l=!1}=r;if(!c)return l?{stop:b,cancel:b,trigger:b}:b;if(U&&!$){$=!0;const t={passive:!0};Array.from(c.document.body.children).forEach(o=>k(o,"click",b,t)),k(c.document.documentElement,"click",b,t)}let n=!0;const s=t=>m(a).some(o=>{if(typeof o=="string")return Array.from(c.document.querySelectorAll(o)).some(u=>u===t.target||t.composedPath().includes(u));{const u=x(o);return u&&(t.target===u||t.composedPath().includes(u))}});function d(t){const o=m(t);return o&&o.$.subTree.shapeFlag===16}function f(t,o){const u=m(t),E=u.$.subTree&&u.$.subTree.children;return E==null||!Array.isArray(E)?!1:E.some(O=>O.el===o.target||o.composedPath().includes(O.el))}const h=t=>{const o=x(e);if(t.target!=null&&!(!(o instanceof Element)&&d(e)&&f(e,t))&&!(!o||o===t.target||t.composedPath().includes(o))){if("detail"in t&&t.detail===0&&(n=!s(t)),!n){n=!0;return}i(t)}};let v=!1;const S=[k(c,"click",t=>{v||(v=!0,setTimeout(()=>{v=!1},0),h(t))},{passive:!0,capture:p}),k(c,"pointerdown",t=>{const o=x(e);n=!s(t)&&!!(o&&!t.composedPath().includes(o))},{passive:!0}),g&&k(c,"blur",t=>{setTimeout(()=>{var o;const u=x(e);((o=c.document.activeElement)==null?void 0:o.tagName)==="IFRAME"&&!(u!=null&&u.contains(c.document.activeElement))&&i(t)},0)},{passive:!0})].filter(Boolean),C=()=>S.forEach(t=>t());return l?{stop:C,cancel:()=>{n=!1},trigger:t=>{n=!0,h(t),n=!1}}:C}const te=["src"],ne={class:"py-2 text-gray-700"},oe=["onClick"],se={__name:"PopMenu",props:{buttonText:{type:String,default:"選單"},buttonIcon:{type:String,default:""},items:{type:Array,default:()=>[{label:"打印成PDF",action:"print",icon:"vscode-icons-file-type-pdf2"},{label:"打印成EXCEL",action:"excel",icon:"vscode-icons-file-type-excel"},{label:"刪除訂單",action:"delete",icon:"mdi:delete"},{label:"添加訂單",action:"add",icon:"mdi:plus"},{label:"修改訂單",action:"edit",icon:"material-symbols-edit-note-outline"}]},position:{type:String,default:"right-0"}},emits:["itemSelected"],setup(e,{emit:i}){const r=e,c=i,a=P(!1),p=P(null),g=P(`absolute ${r.position} mt-2`);ee(p,()=>{a.value=!1});const l=n=>{c("itemSelected",n),a.value=!1};return(n,s)=>{const d=N;return y(),w("div",{class:"relative inline-block text-left",ref_key:"menuRef",ref:p},[A("div",{onClick:s[0]||(s[0]=f=>a.value=!a.value),class:"px-4 py-1 bg-blue-500 text-white rounded-md shadow-md hover:bg-blue-600 flex items-center gap-2 cursor-pointer"},[e.buttonIcon?(y(),w("img",{key:0,src:e.buttonIcon,alt:"menu icon",class:"w-5 h-5"},null,8,te)):I("",!0),M(" "+_(e.buttonText)+" ",1),F(d,{name:"mdi:chevron-down",class:"w-5 h-5"})]),a.value?(y(),w("div",{key:0,class:z([g.value,"absolute mt-2 w-48 bg-white border rounded-sm shadow-lg"])},[A("ul",ne,[(y(!0),w(G,null,q(e.items,(f,h)=>(y(),w("li",{key:h},[A("a",{href:"#",class:"flex items-center px-4 py-2 hover:bg-gray-100 gap-2",onClick:Q(v=>l(f.action),["prevent"])},[f.icon?(y(),X(d,{key:0,name:f.icon,class:"w-5 h-5"},null,8,["name"])):I("",!0),M(" "+_(f.label),1)],8,oe)]))),128))])],2)):I("",!0)],512)}}};export{se as _};
