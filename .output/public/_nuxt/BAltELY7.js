import{d as b,_ as w,a as k}from"./4QqY3rdL.js";import{f as y}from"./CHkz0D1a.js";import{p as Y,D as C,n as P}from"./D-G6fwHa.js";import{d as M,r as n,o as N,t as f,z as o,x as e,A as $,O as c,M as j,N as E,v as m,y as d}from"./LZasg4HZ.js";import"./BKpnw542.js";import"./Dh0oQ4-4.js";import"./QjJsDpFa.js";const B={class:"flex flex-col"},F={class:"mx-5 my-2 p-4 rounded-2xl border-blue-500 border-2"},S={class:"flex items-center justify-center gap-6 pb-4 mt-2"},T={class:"flex flex-col items-center"},U={class:"flex flex-col items-center"},V={class:"flex flex-col pl-2 mb-20"},L={class:""},z={class:"bg-gray-100"},A=["onClick"],G="admin",Z=M({__name:"offDaySetting",setup(H){const r=n(),l=n(),u=n([]),p=n([]),i=async()=>{try{const a=await $fetch("/api/GETallOffdays");p.value=a.data,u.value=p.value.map(t=>({id:t.id,startOffDays:t.start_offDays,endOffDays:t.end_offDays,created_at:t.created_at,create_by:t.created_by}))}catch{alert("Fetch error")}};N(i);const _=async a=>{console.log("DeleteId"+a);try{await $fetch("/api/DeleteOffDays",{method:"DELETE",body:{id:a}})?await i():alert("Post Failed: No valid response")}catch{alert("Delete error")}},x=async()=>{try{const a={startOffDate:r.value?b(r.value).format("YYYY-MM-DD"):null,endOffDate:l.value?b(l.value).format("YYYY-MM-DD"):null,created_by:G};await $fetch("/api/CreateOffDays",{method:"POST",body:a})?await i():alert("Post Failed: No valid response")}catch(a){console.error("PostData 失败:",a),alert("提交失敗")}};return(a,t)=>{const g=w,v=C,D=Y,h=k;return m(),f("div",null,[o(g,{title:"休假設定"}),e("div",B,[e("div",F,[t[4]||(t[4]=e("div",{class:"flex justify-center bg-gray-200 bg-opacity-80 border shadow-sm p-1 mb-1"},[e("p",{class:"font-semibold text-lg"},"添加休假日")],-1)),e("div",S,[o(D,{locale:c(P)},{default:$(()=>[e("div",T,[t[2]||(t[2]=e("p",{class:"mb-1 text-sm font-semibold"},"開始時間",-1)),o(v,{value:r.value,"onUpdate:value":t[0]||(t[0]=s=>r.value=s)},null,8,["value"])]),e("div",U,[t[3]||(t[3]=e("p",{class:"mb-1 text-sm font-semibold"},"結束時間",-1)),o(v,{value:l.value,"onUpdate:value":t[1]||(t[1]=s=>l.value=s)},null,8,["value"])])]),_:1},8,["locale"])]),e("div",{class:"flex justify-center"},[e("button",{class:"rounded-lg px-8 py-1 text-white text-sm bg-blue-500 hover:bg-blue-600",onClick:x}," 提交 ")])]),e("div",V,[t[5]||(t[5]=e("div",{class:"flex justify-center items-center gap-2 mb-2 mx-6 bg-white border border-gray-500 rounded-md shadow-sm"},[e("p",{class:"text-gray-500"}," 已设置的休假日期 ")],-1)),t[6]||(t[6]=e("div",{class:"grid grid-cols-[40px_4fr_4fr_2fr_80px] bg-gray-100 font-bold py-2 text-center text-gray-700 text-sm border-b border-gray-300"},[e("div",null,"序號"),e("div",null,"開始時間"),e("div",null,"結束時間"),e("div",null,"創建人"),e("div",null,"操作")],-1)),(m(!0),f(j,null,E(u.value,(s,O)=>(m(),f("div",{key:O,class:"grid grid-cols-[40px_4fr_4fr_2fr_80px] text-center py-2 border-b border-gray-300 items-center text-sm"},[e("div",null,d(s.id),1),e("div",L,d(("formatDate"in a?a.formatDate:c(y))(s.startOffDays)),1),e("div",z,d(("formatDate"in a?a.formatDate:c(y))(s.endOffDays)),1),e("div",null,d(s.create_by),1),e("div",null,[e("button",{class:"px-3 py-1 text-red-500 border font-medium border-red-500 hover:bg-red-500 hover:text-white rounded-sm",onClick:I=>_(s.id)}," 刪除 ",8,A)])]))),128))])]),o(h)])}}});export{Z as default};
