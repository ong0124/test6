import N from"./BxoEwoNZ.js";import{J as R,$ as j,a0 as V,j as W,a1 as m,N as D,r as P,t as w,v as g,x as A,O as I,B as _,z as F,y as M,S as z,P as G,Q as q,a2 as J,R as Q}from"./BdNMLq4u.js";function X(e){return j()?(V(e),!0):!1}const B=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const H=Object.prototype.toString,K=e=>H.call(e)==="[object Object]",y=()=>{},U=Y();function Y(){var e,i;return B&&((e=window==null?void 0:window.navigator)==null?void 0:e.userAgent)&&(/iP(?:ad|hone|od)/.test(window.navigator.userAgent)||((i=window==null?void 0:window.navigator)==null?void 0:i.maxTouchPoints)>2&&/iPad|Macintosh/.test(window==null?void 0:window.navigator.userAgent))}function C(e){return Array.isArray(e)?e:[e]}function Z(e,i,r){return R(e,i,{...r,immediate:!0})}const L=B?window:void 0;function S(e){var i;const r=m(e);return(i=r==null?void 0:r.$el)!=null?i:r}function k(...e){const i=[],r=()=>{i.forEach(l=>l()),i.length=0},c=(l,n,s,d)=>(l.addEventListener(n,s,d),()=>l.removeEventListener(n,s,d)),a=W(()=>{const l=C(m(e[0])).filter(n=>n!=null);return l.every(n=>typeof n!="string")?l:void 0}),p=Z(()=>{var l,n;return[(n=(l=a.value)==null?void 0:l.map(s=>S(s)))!=null?n:[L].filter(s=>s!=null),C(m(a.value?e[1]:e[0])),C(D(a.value?e[2]:e[1])),m(a.value?e[3]:e[2])]},([l,n,s,d])=>{if(r(),!(l!=null&&l.length)||!(n!=null&&n.length)||!(s!=null&&s.length))return;const f=K(d)?{...d}:d;i.push(...l.flatMap(h=>n.flatMap(v=>s.map(x=>c(h,v,x,f)))))},{flush:"post"}),b=()=>{p(),r()};return X(r),b}let $=!1;function ee(e,i,r={}){const{window:c=L,ignore:a=[],capture:p=!0,detectIframe:b=!1,controls:l=!1}=r;if(!c)return l?{stop:y,cancel:y,trigger:y}:y;if(U&&!$){$=!0;const t={passive:!0};Array.from(c.document.body.children).forEach(o=>k(o,"click",y,t)),k(c.document.documentElement,"click",y,t)}let n=!0;const s=t=>m(a).some(o=>{if(typeof o=="string")return Array.from(c.document.querySelectorAll(o)).some(u=>u===t.target||t.composedPath().includes(u));{const u=S(o);return u&&(t.target===u||t.composedPath().includes(u))}});function d(t){const o=m(t);return o&&o.$.subTree.shapeFlag===16}function f(t,o){const u=m(t),E=u.$.subTree&&u.$.subTree.children;return E==null||!Array.isArray(E)?!1:E.some(T=>T.el===o.target||o.composedPath().includes(T.el))}const h=t=>{const o=S(e);if(t.target!=null&&!(!(o instanceof Element)&&d(e)&&f(e,t))&&!(!o||o===t.target||t.composedPath().includes(o))){if("detail"in t&&t.detail===0&&(n=!s(t)),!n){n=!0;return}i(t)}};let v=!1;const x=[k(c,"click",t=>{v||(v=!0,setTimeout(()=>{v=!1},0),h(t))},{passive:!0,capture:p}),k(c,"pointerdown",t=>{const o=S(e);n=!s(t)&&!!(o&&!t.composedPath().includes(o))},{passive:!0}),b&&k(c,"blur",t=>{setTimeout(()=>{var o;const u=S(e);((o=c.document.activeElement)==null?void 0:o.tagName)==="IFRAME"&&!(u!=null&&u.contains(c.document.activeElement))&&i(t)},0)},{passive:!0})].filter(Boolean),O=()=>x.forEach(t=>t());return l?{stop:O,cancel:()=>{n=!1},trigger:t=>{n=!0,h(t),n=!1}}:O}const te=["src"],ne={class:"py-2 text-gray-700"},oe=["onClick"],se={__name:"PopMenu",props:{buttonText:{type:String,default:"選單"},buttonIcon:{type:String,default:""},items:{type:Array,default:()=>[{label:"打印成PDF",action:"print",icon:"vscode-icons-file-type-pdf2"},{label:"打印成EXCEL",action:"excel",icon:"vscode-icons-file-type-excel"},{label:"刪除訂單",action:"delete",icon:"mdi:delete"},{label:"添加訂單",action:"add",icon:"mdi:plus"}]},position:{type:String,default:"right-0"}},emits:["itemSelected"],setup(e,{emit:i}){const r=e,c=i,a=P(!1),p=P(null),b=P(`absolute ${r.position} mt-2`);ee(p,()=>{a.value=!1});const l=n=>{c("itemSelected",n),a.value=!1};return(n,s)=>{const d=N;return g(),w("div",{class:"relative inline-block text-left",ref_key:"menuRef",ref:p},[A("div",{onClick:s[0]||(s[0]=f=>a.value=!a.value),class:"px-4 py-1 bg-blue-500 text-white rounded-md shadow-md hover:bg-blue-600 flex items-center gap-2 cursor-pointer"},[e.buttonIcon?(g(),w("img",{key:0,src:e.buttonIcon,alt:"menu icon",class:"w-5 h-5"},null,8,te)):I("",!0),_(" "+M(e.buttonText)+" ",1),F(d,{name:"mdi:chevron-down",class:"w-5 h-5"})]),a.value?(g(),w("div",{key:0,class:z([b.value,"absolute mt-2 w-48 bg-white border rounded-sm shadow-lg"])},[A("ul",ne,[(g(!0),w(G,null,q(e.items,(f,h)=>(g(),w("li",{key:h},[A("a",{href:"#",class:"flex items-center px-4 py-2 hover:bg-gray-100 gap-2",onClick:J(v=>l(f.action),["prevent"])},[f.icon?(g(),Q(d,{key:0,name:f.icon,class:"w-5 h-5"},null,8,["name"])):I("",!0),_(" "+M(f.label),1)],8,oe)]))),128))])],2)):I("",!0)],512)}}};export{se as _};
