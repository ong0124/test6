import N from"./C6b958NV.js";import{S as V,Z as j,$ as R,j as W,a0 as f,O as D,r as E,t as w,v as b,x as P,L as I,B as M,z as F,y as _,P as z,M as G,N as q,a1 as Z,V as H}from"./BnletfD5.js";function J(e){return j()?(R(e),!0):!1}const B=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const K=Object.prototype.toString,Q=e=>K.call(e)==="[object Object]",g=()=>{},U=X();function X(){var e,i;return B&&((e=window==null?void 0:window.navigator)==null?void 0:e.userAgent)&&(/iP(?:ad|hone|od)/.test(window.navigator.userAgent)||((i=window==null?void 0:window.navigator)==null?void 0:i.maxTouchPoints)>2&&/iPad|Macintosh/.test(window==null?void 0:window.navigator.userAgent))}function O(e){return Array.isArray(e)?e:[e]}function Y(e,i,r){return V(e,i,{...r,immediate:!0})}const L=B?window:void 0;function S(e){var i;const r=f(e);return(i=r==null?void 0:r.$el)!=null?i:r}function k(...e){const i=[],r=()=>{i.forEach(l=>l()),i.length=0},c=(l,n,s,d)=>(l.addEventListener(n,s,d),()=>l.removeEventListener(n,s,d)),a=W(()=>{const l=O(f(e[0])).filter(n=>n!=null);return l.every(n=>typeof n!="string")?l:void 0}),p=Y(()=>{var l,n;return[(n=(l=a.value)==null?void 0:l.map(s=>S(s)))!=null?n:[L].filter(s=>s!=null),O(f(a.value?e[1]:e[0])),O(D(a.value?e[2]:e[1])),f(a.value?e[3]:e[2])]},([l,n,s,d])=>{if(r(),!(l!=null&&l.length)||!(n!=null&&n.length)||!(s!=null&&s.length))return;const m=Q(d)?{...d}:d;i.push(...l.flatMap(h=>n.flatMap(v=>s.map(x=>c(h,v,x,m)))))},{flush:"post"}),y=()=>{p(),r()};return J(r),y}let $=!1;function ee(e,i,r={}){const{window:c=L,ignore:a=[],capture:p=!0,detectIframe:y=!1,controls:l=!1}=r;if(!c)return l?{stop:g,cancel:g,trigger:g}:g;if(U&&!$){$=!0;const t={passive:!0};Array.from(c.document.body.children).forEach(o=>k(o,"click",g,t)),k(c.document.documentElement,"click",g,t)}let n=!0;const s=t=>f(a).some(o=>{if(typeof o=="string")return Array.from(c.document.querySelectorAll(o)).some(u=>u===t.target||t.composedPath().includes(u));{const u=S(o);return u&&(t.target===u||t.composedPath().includes(u))}});function d(t){const o=f(t);return o&&o.$.subTree.shapeFlag===16}function m(t,o){const u=f(t),A=u.$.subTree&&u.$.subTree.children;return A==null||!Array.isArray(A)?!1:A.some(C=>C.el===o.target||o.composedPath().includes(C.el))}const h=t=>{const o=S(e);if(t.target!=null&&!(!(o instanceof Element)&&d(e)&&m(e,t))&&!(!o||o===t.target||t.composedPath().includes(o))){if("detail"in t&&t.detail===0&&(n=!s(t)),!n){n=!0;return}i(t)}};let v=!1;const x=[k(c,"click",t=>{v||(v=!0,setTimeout(()=>{v=!1},0),h(t))},{passive:!0,capture:p}),k(c,"pointerdown",t=>{const o=S(e);n=!s(t)&&!!(o&&!t.composedPath().includes(o))},{passive:!0}),y&&k(c,"blur",t=>{setTimeout(()=>{var o;const u=S(e);((o=c.document.activeElement)==null?void 0:o.tagName)==="IFRAME"&&!(u!=null&&u.contains(c.document.activeElement))&&i(t)},0)},{passive:!0})].filter(Boolean),T=()=>x.forEach(t=>t());return l?{stop:T,cancel:()=>{n=!1},trigger:t=>{n=!0,h(t),n=!1}}:T}const te=["src"],ne={class:"py-2 text-gray-700"},oe=["onClick"],se={__name:"PopMenu",props:{buttonText:{type:String,default:"選單"},buttonIcon:{type:String,default:""},items:{type:Array,default:()=>[{label:"打印",action:"print",icon:"mdi:printer"},{label:"刪除",action:"delete",icon:"mdi:delete"},{label:"添加",action:"add",icon:"mdi:plus"},{label:"按時間排序",action:"timeAsc",icon:"material-symbols-clock-arrow-up-outline"},{label:"按發車地點排序",action:"locAsc",icon:"material-symbols-car-gear-outline"}]},position:{type:String,default:"right-0"}},emits:["itemSelected"],setup(e,{emit:i}){const r=e,c=i,a=E(!1),p=E(null),y=E(`absolute ${r.position} mt-2`);ee(p,()=>{a.value=!1});const l=n=>{c("itemSelected",n),a.value=!1};return(n,s)=>{const d=N;return b(),w("div",{class:"relative inline-block text-left",ref_key:"menuRef",ref:p},[P("div",{onClick:s[0]||(s[0]=m=>a.value=!a.value),class:"px-4 py-1 bg-blue-500 text-white rounded-md shadow-md hover:bg-blue-600 flex items-center gap-2 cursor-pointer"},[e.buttonIcon?(b(),w("img",{key:0,src:e.buttonIcon,alt:"menu icon",class:"w-5 h-5"},null,8,te)):I("",!0),M(" "+_(e.buttonText)+" ",1),F(d,{name:"mdi:chevron-down",class:"w-5 h-5"})]),a.value?(b(),w("div",{key:0,class:z([y.value,"absolute mt-2 w-48 bg-white border rounded-sm shadow-lg"])},[P("ul",ne,[(b(!0),w(G,null,q(e.items,(m,h)=>(b(),w("li",{key:h},[P("a",{href:"#",class:"flex items-center px-4 py-2 hover:bg-gray-100 gap-2",onClick:Z(v=>l(m.action),["prevent"])},[m.icon?(b(),H(d,{key:0,name:m.icon,class:"w-5 h-5"},null,8,["name"])):I("",!0),M(" "+_(m.label),1)],8,oe)]))),128))])],2)):I("",!0)],512)}}};export{se as _};
